<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Device Complaint</title>
    <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #F2F2F2;
    }

    #form-container {
      max-width: 600px;
      margin: 0 auto;
      background-color: #FFFFFF;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px #999;
    }

    h1 {
      text-align: center;
      color: #555555;
    }

    label {
      display: block;
      font-weight: bold;
      margin-bottom: 10px;
    }

    input[type="text"], textarea {
      width: 97%;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #CCC;
      margin-bottom: 20px;
      resize: none;
    }

    button[type="submit"] {
      background-color: #0077CC;
      color: #FFFFFF;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }

    button[type="submit"]:hover {
      background-color: #7d79f1;
    }
  </style>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> 
     
</head>
<body>
<div id="form-container">
    <h1>Device Complaint</h1>
    <form action="raisetickets" id="ticketsraise" method="post">
      
      <label for="systemid">System ID:</label>
      <input type="text" id="systemid" name="systemid" onblur="fetchSystemName(this.value)" required>
        <label for="name" >Name:</label>
        <input type="text"  id="name" name="name"  required>

        <label for="email">Email:</label>
        <input type="text" id="email" name="email" required>

        <label for="phone">Phone Number:</label>
        <input type="text" id="phone" name="phone" required>


        <label for="os">Operating System:</label>
        <input type="text" id="os" name="os" required>

        <label for="complaints">Complaints:</label>
        <textarea id="complaints" name="complaints" rows="5" required></textarea>

        <button type="submit" id="sub" data-toggle="modal" data-target="#basicModal">Submit</button>
    </form>
</div>
<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Request Form</h4>
      </div>
      <div class="modal-body">
          <h3>Sucessfully Ticket Raised</h3>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
   
<script>

// let v= document.getElementById('systemid');
//         function fetchSystemName(v){
//   // let v= document.getElementById('systemid');
//         // console.log(v)
// fetch("http://localhost:8080/Device_Management/users/display")
//       .then(response => response.json())
//       .then(objectData=>{
//         // console.log(objectData);
//         // let myTable="";
//         // console.log(v)
//         // console.log(objectData[1])
//         // let v= document.getElementById('systemid');
//         // console.log(v)
//         var flag=1;
//         for (i = 0; i < objectData.length; i++){
//               // var store=console.log(objectData[i])
//               // console.log(store)
//               var v1= objectData[i].systemid;
//                 if (v==v1){
//                   flag=0;
//                   // document.getElementById('systemid')
//               // console.log(document.getElementById('email').value = objectData[1].email)
//               document.getElementById('email').value = objectData[i].email;
//               document.getElementById('phone').value = objectData[i].phone;
//                 document.getElementById('name').value = objectData[i].name;
//                 document.getElementById('os').value = objectData[i].os;
//                 break;
                
//               }
//         }
//         if (flag==1){
//           document.getElementById('email').value = "";
//               document.getElementById('phone').value = "";
//                 document.getElementById('name').value = "";
//                 document.getElementById('os').value = ""   ;  
//                 document.getElementById('complaints').value = ""; 
//               }
      
//       //   // objectData.map((values)=>{
          
//       });
//       // });
//         }

  const myButton = document.getElementById("sub");


  const form = document.getElementById('ticketsraise');
  
  form.addEventListener('submit', (e)=>{
      e.preventDefault();

      const formData = new FormData(form);
    let formDataObject = Object.fromEntries(formData.entries());
      let formDataJsonString = JSON.stringify(formDataObject);


      fetch('http://localhost:8080/Device_Management/users/create', {
          method:'POST',
           //Set the headers that specify you're sending a JSON body request and accepting JSON response
      headers: {
          "Content-Type": "application/json",
          Accept: "application/json",
        },
          body: formDataJsonString
      }).then(res => res.json)
        .then(data => console.log(data))
        .catch((err) =>{
          alert(err);
          console.log(err)
      });
  });
  //   var i=1;
  
//   // let v= document.getElementById('systemid').getAttribute('value',systemid);
//     fetchSystemName(i)
//     function fetchSystemName(i) {
//     fetch("http://localhost:8080/Device_Management/users/"+i)
//       .then(response => response.json()) 
//       .then(objectData=>{
//         console.log(objectData);
//         // let v1=objectData.systemid;
//         let v= document.getElementById('systemid').getAttribute(systemid);
//         document.getElementById('email').value = objectData.email;
//         // document.getElementById('email').value = v;
//         //       document.getElementById('phone').value = v1;
//         //     if(v ==v1 )
//         //     {
              
              // document.getElementById('email').value = objectData.email;
              // document.getElementById('phone').value = objectData.phone;
              //   document.getElementById('name').value = objectData.name;
              //   document.getElementById('os').value = objectData.os;

//         //     }
//         //     else
//         //     {
//         //         i=i+1;
//         //         fetchSystemName(i)
//         //     }
//         });
//     // });
// }


  
</script>
</body>
</html>
